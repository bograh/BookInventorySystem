@inject HttpClient Http
@inject NavigationManager NavigationManager

<PageTitle>Add New Book</PageTitle>

<h1>Add Book</h1>

<EditForm Model="@newBook" OnValidSubmit="@HandleSubmit">

    <div class="form-group">
        <label for="title">Title:</label>
        <InputText id="title" @bind-Value="newBook.Title" />
    </div><br>
    <div class="form-group">
        <label for="author">Author:</label>
        <InputText id="author" @bind-Value="newBook.Author" />
    </div><br>
    <div class="form-group">
        <label for="isbn">ISBN:</label>
        <InputText id="isbn" @bind-Value="newBook.ISBN" />
    </div><br>
    <div class="form-group">
        <label for="genre">Genre:</label>
        <InputText id="genre" @bind-Value="newBook.Genre" />
    </div><br>
    <div class="form-group">
        <label for="imageUrl">Image:</label>
        <InputText id="imageUrl" @bind-Value="newBook.ImageUrl" />
    </div><br>
    <div class="form-group">
        <label for="qty">Quantity:</label>
        <InputNumber id="qty" @bind-Value="newBook.Qty" />
    </div><br>

    <button type="submit">Add Book</button>
</EditForm>


@code {
    private BookModel newBook = new BookModel(0, "", "", "", "", "", 0); // Initialize here

    private async Task HandleSubmit()
    {
        var response = await Http.PostAsJsonAsync<BookModel>("/books", newBook);

        if (response.IsSuccessStatusCode)
        {
            // Success! Show confirmation message
            // You can show a toast notification or navigate to another page
            NavigationManager.NavigateTo("/");
        }
        else
        {
            // Error! Show error message
            // You can display the error message returned from the server
            // Example: ShowToast("Failed to add book. Please try again.", ToastType.Error);
        }
    }
}
